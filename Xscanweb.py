# Obfuscated by Mr.X
# Dont recode this skids:V
import base64
exec(base64.b64decode('ZnJvbSByaWNoLmNvbnNvbGUgaW1wb3J0IENvbnNvbGUKZnJvbSByaWNoLnRhYmxlIGltcG9ydCBUYWJsZQpmcm9tIHJpY2gucHJvZ3Jlc3MgaW1wb3J0IFByb2dyZXNzLCBTcGlubmVyQ29sdW1uLCBUZXh0Q29sdW1uLCBCYXJDb2x1bW4sIFRpbWVFbGFwc2VkQ29sdW1uCmZyb20gcmljaC5saXZlIGltcG9ydCBMaXZlCmZyb20gcmljaC5wYW5lbCBpbXBvcnQgUGFuZWwKZnJvbSByaWNoLnN0eWxlIGltcG9ydCBTdHlsZQppbXBvcnQgcmVxdWVzdHMKaW1wb3J0IHNvY2tldAppbXBvcnQgc3NsCmltcG9ydCB3aG9pcwppbXBvcnQgZG5zLnJlc29sdmVyCmZyb20gZGF0ZXRpbWUgaW1wb3J0IGRhdGV0aW1lCmltcG9ydCB1cmxsaWIucGFyc2UKaW1wb3J0IHRpbWUKaW1wb3J0IGNvbmN1cnJlbnQuZnV0dXJlcwppbXBvcnQgb3MKaW1wb3J0IHBsYXRmb3JtCmltcG9ydCBweWZpZ2xldAoKQ09MT1JTID0gewogICAgJ3ByaW1hcnknOiAnZGVlcF9za3lfYmx1ZTInLAogICAgJ3NlY29uZGFyeSc6ICdzbGF0ZV9ibHVlMycsCiAgICAnc3VjY2Vzcyc6ICdncmVlbjMnLAogICAgJ3dhcm5pbmcnOiAneWVsbG93MycsCiAgICAnZXJyb3InOiAncmVkMycsCiAgICAnaW5mbyc6ICdjeWFuMicsCiAgICAndGV4dCc6ICdncmV5ODQnLAogICAgJ2hpZ2hsaWdodCc6ICdncmV5ODQnCn0KCmNvbnNvbGUgPSBDb25zb2xlKCkKCmRlZiBjbGVhbl9zY3JlZW4oKToKICAgIG9zLnN5c3RlbSgnY2xzJyBpZiBvcy5uYW1lID09ICdudCcgZWxzZSAnY2xlYXInKQoKZGVmIGNsZWFuX3VybCh1cmwpOgogICAgdXJsID0gdXJsLnN0cmlwKCkubG93ZXIoKQogICAgaWYgbm90IHVybC5zdGFydHN3aXRoKCgnaHR0cDovLycsICdodHRwczovLycpKToKICAgICAgICB1cmwgPSAnaHR0cHM6Ly8nICsgdXJsCiAgICByZXR1cm4gdXJsCgpkZWYgZ2V0X2RvbWFpbih1cmwpOgogICAgcGFyc2VkID0gdXJsbGliLnBhcnNlLnVybHBhcnNlKHVybCkKICAgIHJldHVybiBwYXJzZWQubmV0bG9jCgpkZWYgZm9ybWF0X2RhdGUoZGF0ZV9zdHIpOgogICAgaWYgbm90IGRhdGVfc3RyOgogICAgICAgIHJldHVybiAiTm90IEF2YWlsYWJsZSIKICAgIHRyeToKICAgICAgICBpZiBpc2luc3RhbmNlKGRhdGVfc3RyLCBzdHIpOgogICAgICAgICAgICBkYXRlX29iaiA9IGRhdGV0aW1lLnN0cnB0aW1lKGRhdGVfc3RyLCAiJWIgJWQgJUg6JU06JVMgJVkgR01UIikKICAgICAgICBlbHNlOgogICAgICAgICAgICBkYXRlX29iaiA9IGRhdGVfc3RyCiAgICAgICAgcmV0dXJuIGRhdGVfb2JqLnN0cmZ0aW1lKCIlZCAlQiAlWSIpCiAgICBleGNlcHQgRXhjZXB0aW9uOgogICAgICAgIHJldHVybiBzdHIoZGF0ZV9zdHIpCgpkZWYgZ2V0X3NlY3VyaXR5X2hlYWRlcnMoaGVhZGVycyk6CiAgICBzZWN1cml0eV9oZWFkZXJzID0gewogICAgICAgICdTdHJpY3QtVHJhbnNwb3J0LVNlY3VyaXR5JzogJ0hTVFMnLAogICAgICAgICdDb250ZW50LVNlY3VyaXR5LVBvbGljeSc6ICdDU1AnLAogICAgICAgICdYLUZyYW1lLU9wdGlvbnMnOiAnWC1GcmFtZScsCiAgICAgICAgJ1gtQ29udGVudC1UeXBlLU9wdGlvbnMnOiAnWC1Db250ZW50LVR5cGUnLAogICAgICAgICdYLVhTUy1Qcm90ZWN0aW9uJzogJ1hTUyBQcm90ZWN0aW9uJywKICAgICAgICAnUmVmZXJyZXItUG9saWN5JzogJ1JlZmVycmVyIFBvbGljeScsCiAgICAgICAgJ0ZlYXR1cmUtUG9saWN5JzogJ0ZlYXR1cmUgUG9saWN5JwogICAgfQogICAgcmV0dXJuIHtuZXdfbmFtZTogaGVhZGVycy5nZXQoaGVhZGVyLCAnTm90IEF2YWlsYWJsZScpIAogICAgICAgICAgICBmb3IgaGVhZGVyLCBuZXdfbmFtZSBpbiBzZWN1cml0eV9oZWFkZXJzLml0ZW1zKCl9CgpkZWYgY2hlY2tfYWRtaW5fcGFuZWwodXJsLCB0aW1lb3V0PTMpOgogICAgYWRtaW5fcGF0aHMgPSBbJy9hZG1pbicsICcvYWRtaW5pc3RyYXRvcicsICcvd3AtYWRtaW4nLCAnL2xvZ2luJywgCiAgICAgICAgICAgICAgICAgICcvcGFuZWwnLCAnL2FkbWluLnBocCcsICcvYWRtaW4vbG9naW4nLCAnL2NwJ10KICAgIGZvdW5kX3BhdGhzID0gW10KICAgIAogICAgd2l0aCBjb25jdXJyZW50LmZ1dHVyZXMuVGhyZWFkUG9vbEV4ZWN1dG9yKG1heF93b3JrZXJzPTUpIGFzIGV4ZWN1dG9yOgogICAgICAgIGRlZiBjaGVja19wYXRoKHBhdGgpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB0ZXN0X3VybCA9IHVybC5yc3RyaXAoJy8nKSArIHBhdGgKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KHRlc3RfdXJsLCB0aW1lb3V0PXRpbWVvdXQsIGFsbG93X3JlZGlyZWN0cz1GYWxzZSkKICAgICAgICAgICAgICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlIGluIFsyMDAsIDMwMSwgMzAyLCA0MDNdOgogICAgICAgICAgICAgICAgICAgIHJldHVybiB0ZXN0X3VybAogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCiAgICAgICAgICAgIHJldHVybiBOb25lCiAgICAgICAgCiAgICAgICAgZnV0dXJlcyA9IFtleGVjdXRvci5zdWJtaXQoY2hlY2tfcGF0aCwgcGF0aCkgZm9yIHBhdGggaW4gYWRtaW5fcGF0aHNdCiAgICAgICAgZm9yIGZ1dHVyZSBpbiBjb25jdXJyZW50LmZ1dHVyZXMuYXNfY29tcGxldGVkKGZ1dHVyZXMpOgogICAgICAgICAgICBpZiBmdXR1cmUucmVzdWx0KCk6CiAgICAgICAgICAgICAgICBmb3VuZF9wYXRocy5hcHBlbmQoZnV0dXJlLnJlc3VsdCgpKQogICAgCiAgICByZXR1cm4gZm91bmRfcGF0aHMKCmRlZiBncmFiX2Jhbm5lcih1cmwsIHRpbWVvdXQ9NSk6CiAgICB0cnk6CiAgICAgICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQodXJsLCB0aW1lb3V0PXRpbWVvdXQpCiAgICAgICAgc2VydmVyID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ1NlcnZlcicsICdOb3QgQXZhaWxhYmxlJykKICAgICAgICB4X3Bvd2VyZWRfYnkgPSByZXNwb25zZS5oZWFkZXJzLmdldCgnWC1Qb3dlcmVkLUJ5JywgJ05vdCBBdmFpbGFibGUnKQogICAgICAgIHJldHVybiBzZXJ2ZXIsIHhfcG93ZXJlZF9ieQogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHJldHVybiBmJ0Vycm9yOiB7c3RyKGUpfScsICdOb3QgQXZhaWxhYmxlJwoKZGVmIGdldF90ZWNobm9sb2dpZXModXJsKToKICAgIHRyeToKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCh1cmwpCiAgICAgICAgcmV0dXJuICJBbmFseXNpcyBub3QgaW1wbGVtZW50ZWQiCiAgICBleGNlcHQ6CiAgICAgICAgcmV0dXJuICJOb3QgQXZhaWxhYmxlIgoKZGVmIGdldF9zZXJ2ZXJfbG9jYXRpb24odXJsKToKICAgIHRyeToKICAgICAgICByZXNwb25zZSA9IHJlcXVlc3RzLmdldCh1cmwpCiAgICAgICAgc2VydmVyX2lwID0gcmVzcG9uc2UucmF3Ll9jb25uZWN0aW9uLnNvY2suZ2V0cGVlcm5hbWUoKVswXQogICAgICAgIGxvY2F0aW9uID0gcmVxdWVzdHMuZ2V0KGYiaHR0cHM6Ly9pcGluZm8uaW8ve3NlcnZlcl9pcH0vanNvbiIpLmpzb24oKQogICAgICAgIHJldHVybiBsb2NhdGlvbi5nZXQoImNpdHkiLCAiTm90IEF2YWlsYWJsZSIpLCBsb2NhdGlvbi5nZXQoImNvdW50cnkiLCAiTm90IEF2YWlsYWJsZSIpCiAgICBleGNlcHQ6CiAgICAgICAgcmV0dXJuICJOb3QgQXZhaWxhYmxlIiwgIk5vdCBBdmFpbGFibGUiCgpkZWYgY3JlYXRlX3N0eWxlZF90YWJsZSh0aXRsZSk6CiAgICB0YWJsZSA9IFRhYmxlKAogICAgICAgIHRpdGxlPXRpdGxlLAogICAgICAgIHRpdGxlX3N0eWxlPVN0eWxlKGNvbG9yPUNPTE9SU1sncHJpbWFyeSddLCBib2xkPVRydWUpLAogICAgICAgIGJvcmRlcl9zdHlsZT1TdHlsZShjb2xvcj1DT0xPUlNbJ3NlY29uZGFyeSddKSwKICAgICAgICBoZWFkZXJfc3R5bGU9U3R5bGUoY29sb3I9Q09MT1JTWydoaWdobGlnaHQnXSwgYm9sZD1UcnVlKSwKICAgICAgICBwYWRfZWRnZT1GYWxzZSwKICAgICAgICBleHBhbmQ9VHJ1ZQogICAgKQogICAgdGFibGUuYWRkX2NvbHVtbigiQ2F0ZWdvcnkiLCBzdHlsZT1TdHlsZShjb2xvcj1DT0xPUlNbJ2luZm8nXSksIG5vX3dyYXA9VHJ1ZSkKICAgIHRhYmxlLmFkZF9jb2x1bW4oIkRldGFpbHMiLCBzdHlsZT1TdHlsZShjb2xvcj1DT0xPUlNbJ3RleHQnXSkpCiAgICByZXR1cm4gdGFibGUKCmRlZiBzY2FuX3dlYnNpdGUodXJsKToKICAgIHRyeToKICAgICAgICB1cmwgPSBjbGVhbl91cmwodXJsKQogICAgICAgIGRvbWFpbiA9IGdldF9kb21haW4odXJsKQogICAgICAgIAogICAgICAgIHdpdGggUHJvZ3Jlc3MoCiAgICAgICAgICAgIFNwaW5uZXJDb2x1bW4oc3R5bGU9Q09MT1JTWydwcmltYXJ5J10pLAogICAgICAgICAgICBUZXh0Q29sdW1uKCJbcHJvZ3Jlc3MuZGVzY3JpcHRpb25de3Rhc2suZGVzY3JpcHRpb259IiksCiAgICAgICAgICAgIEJhckNvbHVtbihjb21wbGV0ZV9zdHlsZT1DT0xPUlNbJ3N1Y2Nlc3MnXSwgZmluaXNoZWRfc3R5bGU9Q09MT1JTWydzdWNjZXNzJ10pLAogICAgICAgICAgICBUaW1lRWxhcHNlZENvbHVtbigpLAogICAgICAgICAgICBjb25zb2xlPWNvbnNvbGUKICAgICAgICApIGFzIHByb2dyZXNzOgogICAgICAgICAgICBtYWluX3RhYmxlID0gY3JlYXRlX3N0eWxlZF90YWJsZShmIldlYnNpdGUgU2NhbiBSZXN1bHRzOiB7dXJsfSIpCiAgICAgICAgICAgIHNjYW5fdGFzayA9IHByb2dyZXNzLmFkZF90YXNrKAogICAgICAgICAgICAgICAgZiJbe0NPTE9SU1snaW5mbyddfV1TY2FubmluZy4uLiIsCiAgICAgICAgICAgICAgICB0b3RhbD0xMDAKICAgICAgICAgICAgKQogICAgICAgICAgICAKICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHNjYW5fdGFzaywgYWR2YW5jZT0xMCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249ZiJbe0NPTE9SU1snaW5mbyddfV1DaGVja2luZyBJUCBhbmQgRE5TLi4uIikKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgaXAgPSBzb2NrZXQuZ2V0aG9zdGJ5bmFtZShkb21haW4pCiAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIklQIEFkZHJlc3MiLCBpcCkKCiAgICAgICAgICAgICAgICBkbnNfcmVjb3JkcyA9IGRucy5yZXNvbHZlci5yZXNvbHZlKGRvbWFpbiwgJ0EnKQogICAgICAgICAgICAgICAgZG5zX2lwcyA9IFtzdHIocmVjb3JkKSBmb3IgcmVjb3JkIGluIGRuc19yZWNvcmRzXQogICAgICAgICAgICAgICAgaWYgZG5zX2lwczoKICAgICAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIkROUyBSZWNvcmRzIiwgIlxuIi5qb2luKGRuc19pcHMpKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIk5ldHdvcmsgSW5mbyIsIGYiRXJyb3I6IHtzdHIoZSl9IikKCiAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShzY2FuX3Rhc2ssIGFkdmFuY2U9MjAsIAogICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPWYiW3tDT0xPUlNbJ2luZm8nXX1dQ2hlY2tpbmcgU1NMLi4uIikKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgY29udGV4dCA9IHNzbC5jcmVhdGVfZGVmYXVsdF9jb250ZXh0KCkKICAgICAgICAgICAgICAgIHdpdGggc29ja2V0LmNyZWF0ZV9jb25uZWN0aW9uKChkb21haW4sIDQ0MykpIGFzIHNvY2s6CiAgICAgICAgICAgICAgICAgICAgd2l0aCBjb250ZXh0LndyYXBfc29ja2V0KHNvY2ssIHNlcnZlcl9ob3N0bmFtZT1kb21haW4pIGFzIHNzb2NrOgogICAgICAgICAgICAgICAgICAgICAgICBjZXJ0ID0gc3NvY2suZ2V0cGVlcmNlcnQoKQogICAgICAgICAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIlNTTCBWYWxpZCBGcm9tIiwgZm9ybWF0X2RhdGUoY2VydFsnbm90QmVmb3JlJ10pKQogICAgICAgICAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIlNTTCBWYWxpZCBVbnRpbCIsIGZvcm1hdF9kYXRlKGNlcnRbJ25vdEFmdGVyJ10pKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIlNTTCBTdGF0dXMiLCBmIkVycm9yOiB7c3RyKGUpfSIpCgogICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoc2Nhbl90YXNrLCBhZHZhbmNlPTIwLCAKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj1mIlt7Q09MT1JTWydpbmZvJ119XUNoZWNraW5nIEhUVFAgSGVhZGVycy4uLiIpCiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gcmVxdWVzdHMuZ2V0KHVybCwgdGltZW91dD01KQogICAgICAgICAgICAgICAgc3RhdHVzX2NvbG9yID0gQ09MT1JTWydzdWNjZXNzJ10gaWYgcmVzcG9uc2Uuc3RhdHVzX2NvZGUgPT0gMjAwIGVsc2UgQ09MT1JTWyd3YXJuaW5nJ10KICAgICAgICAgICAgICAgIG1haW5fdGFibGUuYWRkX3JvdygKICAgICAgICAgICAgICAgICAgICAiSFRUUCBTdGF0dXMiLAogICAgICAgICAgICAgICAgICAgIGYiW3tzdGF0dXNfY29sb3J9XXtyZXNwb25zZS5zdGF0dXNfY29kZX0gKHtyZXNwb25zZS5yZWFzb259KVsve3N0YXR1c19jb2xvcn1dIgogICAgICAgICAgICAgICAgKQoKICAgICAgICAgICAgICAgIHNlY3VyaXR5X2hlYWRlcnMgPSBnZXRfc2VjdXJpdHlfaGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKQogICAgICAgICAgICAgICAgZm9yIGhlYWRlciwgdmFsdWUgaW4gc2VjdXJpdHlfaGVhZGVycy5pdGVtcygpOgogICAgICAgICAgICAgICAgICAgIG1haW5fdGFibGUuYWRkX3JvdyhoZWFkZXIsIHZhbHVlKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIkhUVFAgU3RhdHVzIiwgZiJFcnJvcjoge3N0cihlKX0iKQoKICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHNjYW5fdGFzaywgYWR2YW5jZT0yMCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249ZiJbe0NPTE9SU1snaW5mbyddfV1GZXRjaGluZyBXSE9JUyBJbmZvLi4uIikKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgZG9tYWluX2luZm8gPSB3aG9pcy53aG9pcyhkb21haW4pCiAgICAgICAgICAgICAgICBpZiBkb21haW5faW5mby5jcmVhdGlvbl9kYXRlOgogICAgICAgICAgICAgICAgICAgIGNyZWF0aW9uX2RhdGUgPSBkb21haW5faW5mby5jcmVhdGlvbl9kYXRlWzBdIGlmIGlzaW5zdGFuY2UoZG9tYWluX2luZm8uY3JlYXRpb25fZGF0ZSwgbGlzdCkgZWxzZSBkb21haW5faW5mby5jcmVhdGlvbl9kYXRlCiAgICAgICAgICAgICAgICAgICAgbWFpbl90YWJsZS5hZGRfcm93KCJEb21haW4gQ3JlYXRlZCIsIGZvcm1hdF9kYXRlKGNyZWF0aW9uX2RhdGUpKQogICAgICAgICAgICAgICAgaWYgZG9tYWluX2luZm8uZXhwaXJhdGlvbl9kYXRlOgogICAgICAgICAgICAgICAgICAgIGV4cGlyYXRpb25fZGF0ZSA9IGRvbWFpbl9pbmZvLmV4cGlyYXRpb25fZGF0ZVswXSBpZiBpc2luc3RhbmNlKGRvbWFpbl9pbmZvLmV4cGlyYXRpb25fZGF0ZSwgbGlzdCkgZWxzZSBkb21haW5faW5mby5leHBpcmF0aW9uX2RhdGUKICAgICAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIkRvbWFpbiBFeHBpcnkiLCBmb3JtYXRfZGF0ZShleHBpcmF0aW9uX2RhdGUpKQogICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIldIT0lTIEluZm8iLCBmIkVycm9yOiB7c3RyKGUpfSIpCgogICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoc2Nhbl90YXNrLCBhZHZhbmNlPTEwLCAKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj1mIlt7Q09MT1JTWydpbmZvJ119XUNoZWNraW5nIEFkbWluIFBhbmVsLi4uIikKICAgICAgICAgICAgYWRtaW5fcGFuZWxzID0gY2hlY2tfYWRtaW5fcGFuZWwodXJsKQogICAgICAgICAgICBpZiBhZG1pbl9wYW5lbHM6CiAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIkFkbWluIFBhbmVsIiwgIlxuIi5qb2luKGFkbWluX3BhbmVscykpCiAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIkFkbWluIFBhbmVsIiwgIk5vdCBGb3VuZCIpCgogICAgICAgICAgICBwcm9ncmVzcy51cGRhdGUoc2Nhbl90YXNrLCBhZHZhbmNlPTEwLCAKICAgICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbj1mIlt7Q09MT1JTWydpbmZvJ119XUZldGNoaW5nIFNlcnZlciBJbmZvLi4uIikKICAgICAgICAgICAgc2VydmVyLCB4X3Bvd2VyZWRfYnkgPSBncmFiX2Jhbm5lcih1cmwpCiAgICAgICAgICAgIG1haW5fdGFibGUuYWRkX3JvdygiU2VydmVyIiwgc2VydmVyKQogICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIlgtUG93ZXJlZC1CeSIsIHhfcG93ZXJlZF9ieSkKCiAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShzY2FuX3Rhc2ssIGFkdmFuY2U9MTAsIAogICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPWYiW3tDT0xPUlNbJ2luZm8nXX1dRGV0ZWN0aW5nIFRlY2hub2xvZ2llcy4uLiIpCiAgICAgICAgICAgIHRlY2hub2xvZ2llcyA9IGdldF90ZWNobm9sb2dpZXModXJsKQogICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIlRlY2hub2xvZ2llcyIsIHRlY2hub2xvZ2llcykKCiAgICAgICAgICAgIHByb2dyZXNzLnVwZGF0ZShzY2FuX3Rhc2ssIGFkdmFuY2U9MTAsIAogICAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uPWYiW3tDT0xPUlNbJ2luZm8nXX1dTG9jYXRpbmcgU2VydmVyLi4uIikKICAgICAgICAgICAgY2l0eSwgY291bnRyeSA9IGdldF9zZXJ2ZXJfbG9jYXRpb24odXJsKQogICAgICAgICAgICBtYWluX3RhYmxlLmFkZF9yb3coIlNlcnZlciBMb2NhdGlvbiIsIGYie2NpdHl9LCB7Y291bnRyeX0iKQoKICAgICAgICAgICAgcHJvZ3Jlc3MudXBkYXRlKHNjYW5fdGFzaywgY29tcGxldGVkPTEwMCwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb249ZiJbe0NPTE9SU1snc3VjY2VzcyddfV1TY2FuIENvbXBsZXRlISIpCiAgICAgICAgICAgIHRpbWUuc2xlZXAoMC41KQoKICAgICAgICBjb25zb2xlLnByaW50KG1haW5fdGFibGUpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIGNvbnNvbGUucHJpbnQoUGFuZWwoZiJTY2FuIEVycm9yOiB7c3RyKGUpfSIsIAogICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVN0eWxlKGNvbG9yPUNPTE9SU1snZXJyb3InXSkpKQoKaWYgX19uYW1lX18gPT0gIl9fbWFpbl9fIjoKICAgIGNsZWFuX3NjcmVlbigpCiAgICAKICAgIGJhbm5lciA9IHB5ZmlnbGV0LmZpZ2xldF9mb3JtYXQoIiAgIFhzY2Fud2ViIiwgZm9udD0ic2xhbnQiKQogICAgY29uc29sZS5wcmludChQYW5lbCgKICAgICAgICBmIlt7Q09MT1JTWydwcmltYXJ5J119XXtiYW5uZXJ9Wy97Q09MT1JTWydwcmltYXJ5J119XSIsCiAgICAgICAgICAgICBzdWJ0aXRsZT0iWHNjYW53ZWIgQnkgTXIuWCIsCiAgICAgICAgYm9yZGVyX3N0eWxlPVN0eWxlKGNvbG9yPUNPTE9SU1snc2Vjb25kYXJ5J10pCiAgICApKQoKICAgIHRyeToKICAgICAgICB1cmxfaW5wdXQgPSBjb25zb2xlLmlucHV0KGYiW3tDT0xPUlNbJ3ByaW1hcnknXX1dIEVudGVyIHdlYnNpdGUgVVJMOiBbL3tDT0xPUlNbJ3ByaW1hcnknXX1dIikuc3RyaXAoKQogICAgICAgIGlmIG5vdCB1cmxfaW5wdXQ6CiAgICAgICAgICAgIGNvbnNvbGUucHJpbnQoUGFuZWwoIlVSTCBjYW5ub3QgYmUgZW1wdHkhIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPVN0eWxlKGNvbG9yPUNPTE9SU1snZXJyb3InXSkpKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIHNjYW5fd2Vic2l0ZSh1cmxfaW5wdXQpCiAgICBleGNlcHQgS2V5Ym9hcmRJbnRlcnJ1cHQ6CiAgICAgICAgY29uc29sZS5wcmludChQYW5lbCgiXG5TY2FuIGNhbmNlbGVkIGJ5IHVzZXIuIiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9U3R5bGUoY29sb3I9Q09MT1JTWyd3YXJuaW5nJ10pKSkKICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToKICAgICAgICBjb25zb2xlLnByaW50KFBhbmVsKGYiRXJyb3I6IHtzdHIoZSl9IiwgCiAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9U3R5bGUoY29sb3I9Q09MT1JTWydlcnJvciddKSkp').decode('utf-8'))
